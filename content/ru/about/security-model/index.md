---
title: Модель безопасности Хьюго
description: Краткое изложение модели безопасности HUGO.
date: 2019-10-01
layout: single
keywords: ["Security", "Privacy"]
menu:
  docs:
    parent: "about"
    weight: 4
weight: 5
sections_weight: 5
aliases: [/security/]
toc: true
---

## Безопасность среды выполнения

Результатом работы Hugo является статический вывод, поэтому после сборки средой выполнения является браузер (при условии, что вывод представляет собой HTML) и любой сервер (API), с которым вы интегрируетесь.

Но во время разработки и сборки, средой выполнения является исполняемый файдл `hugo`. Безопасность среды выполнения может стать [настоящей проблемой](https://blog.logrocket.com/how-to-protect-your-node-js-applications-from-malicious-dependencies-5f2e60ea08f9/).

**Основной подход HUGO — это выполнение процессов в изолированной среде, т.н. песочнице и политика безопасности со строгими значениями по умолчанию:**

* Hugo имеет виртуальную файловую систему, и только основному проекту (не сторонним компонентам) разрешено монтировать директории или файлы вне корня проекта.
* Только основной проект может преходить по символическим ссылкам.
* Пользовательские компоненты имеют доступ к файловой системе только для чтения.
* Hugo использует внешние бинарники для поддержки таких разметок как [Asciidoctor](/content-management/formats/#list-of-content-formats), но эти двоичные файлы и их флаги предопределены и отключены по умолчанию. (см. [Политика безопасности](#политика-безопасности)). Функции для запуска внешних команд OS [обсужлались](https://github.com/gohugoio/hugo/issues/796), но не реализованы из соображений безопасности.

## Политика безопасности

Hugo имеет встроенную политику безопасности, которая ограничивает доступ к [os/exec](https://pkg.go.dev/os/exec), удаленному подключению и т.п.

Конфигурация по умолчанию приведена ниже. Любая сборка с использованием функций, не включенных в список разрешений политики безопасности, завершится ошибкой с подробным сообщением о том, что необходимо сделать. Большинство этих параметров представляют собой списки разрешений (строка или slice, [Регулярные выражения](https://pkg.go.dev/regexp) или `none`, что ничему не соответствует).

{{< code-toggle config="security" />}}

Обратите внимание, что эти и другие параметры конфигурации в Hugo могут быть переопределены переменными окружения ОС. Если вы хотите заблокировать все удаленные HTTP-выборки данных:

```txt
HUGO_SECURITY_HTTP_URLS=none hugo
```

## Безопасность зависимостей

Hugo построен как статический бинарник с использованием [модулей Go](https://github.com/golang/go/wiki/Modules) для управления его зависимостями. Модули Go имеют несколько средств защиты, одной из которых является файл `go.sum`. Это база данных ожидаемых криптографических контрольных сумм всех ваших зависимостей, включая транзитивные зависимости.

[Модули HUGO](/hugo-modules/) — это функционал, построенный над функциональностью Go Modules. Как и модули Go, проект Hugo, использующий модули Hugo, будет иметь файл go.sum. Мы рекомендуем вам зафиксировать этот файл в вашей системе контроля версий (Имеется ввиду Git commit). Сборка Hugo завершится ошибкой, если будет несоответствие контрольной суммы, что может указывать на [подмену зависимостей](https://julienrenaux.fr/2019/12/20/github-actions-security-risk/).

## Безопасность веб-приложений

Это угрозы безопасности, определенные [OWASP](https://en.wikipedia.org/wiki/OWASP).

Для вывода HTML это основная модель безопасности:

<https://pkg.go.dev/html/template#hdr-Security_Model>

Вкратце:

Авторам шаблонов (т.е. вам) доверяют, а данные, которые вы отправляете, — нет. Вот почему вам иногда нужно объявлять код безопасным с помощью функции [safeHTML](/ru/functions/safehtml/), чтобы избежать экранирования данных шаблонизатором Go, которое, делает содержимое безопасным. Как указано в документации, есть одно исключение из вышесказанного: если вы включаете встроенные шорткоды, вы также говорите, что шорткоды и обработка данных в файлах содержимого являются доверенными, поскольку эти макросы обрабатываются как чистый текст. Возможно, стоит добавить, что Hugo — это генератор статических сайтов без концепции динамического пользовательского ввода.

Средство визуализации Markdown по умолчанию [настроено](/ru/getting-started/configuration-markup) для удаления или исключения потенциально небезопасного контента. Это поведение можно изменить, если вы доверяете своему контенту.
